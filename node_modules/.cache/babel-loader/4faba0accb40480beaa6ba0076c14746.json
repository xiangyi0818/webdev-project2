{"ast":null,"code":"import { combineReducers } from 'redux';\nimport { useSelector } from 'react-redux'; // export default combineReducers({\n//     toComplete:ToCompleteReducer,\n//     completed:CompletedReducer,\n// })\n\nexport default function mainReducer(state = {\n  toComplete: [],\n  completed: [],\n  dimensions: 4,\n  stateRange: 3,\n  numView: 12,\n  cardToRemove: []\n}, action) {\n  return {\n    toComplete: ToCompleteReducer(state, action),\n    completed: CompletedReducer(state, action),\n    dimensions: state.dimensions,\n    stateRange: state.stateRange,\n    numView: state.numView,\n    cardToRemove: state.cardToRemove\n  };\n}\n\nfunction ToCompleteReducer(state, action) {\n  let toComplete = state.toComplete;\n  let DIMENSIONS = state.dimensions;\n  let STATERANGE = state.stateRange;\n\n  if (action.type === \"TRY_REMOVE\") {\n    if (verifyRemove(action.cardToRemove)) {\n      let newToComplete = [];\n\n      for (const card of toComplete) {\n        if (isSameCard(card, action.cardToRemove[0]) || isSameCard(card, action.cardToRemove[1]) || isSameCard(card, action.cardToRemove[2])) {\n          continue;\n        }\n\n        newToComplete.push(card);\n      }\n\n      return newToComplete;\n    } else {\n      return toComplete;\n    }\n  } else if (action.type === \"START_GAME\") {\n    return GenerateInitialCards({\n      dimensions: DIMENSIONS,\n      stateRange: STATERANGE\n    });\n  } else {\n    return toComplete;\n  }\n}\n\n_c = ToCompleteReducer;\n\nfunction CompletedReducer(state, action) {\n  let completed = state.completed;\n\n  if (action.type === \"TRY_REMOVE\") {\n    if (verifyRemove(action.cardToRemove)) {\n      return [...completed, ...action.cardToRemove];\n    } else {\n      return completed;\n    }\n  } else if (action.type === \"START_GAME\") {\n    return [];\n  } else {\n    return completed;\n  }\n}\n\n_c2 = CompletedReducer;\n\nconst CardToRemove = (state, action) => {\n  if (action.type === \"AddCardToRemove\") {}\n};\n\n_c3 = CardToRemove;\n\nconst GenerateInitialCards = props => {\n  // let DIMENSIONS=useSelector(state=>state.dimensions);\n  // let STATERANGE=useSelector(state=>state.stateRange);\n  const DIMENSIONS = props.dimensions;\n  const STATERANGE = props.stateRange;\n  let i = 0;\n  let initialState = [[]];\n\n  while (i < DIMENSIONS) {\n    let temp = [];\n\n    for (let j = 0; j < STATERANGE; j++) {\n      initialState.forEach((item, index) => temp.push([...item, j]));\n    }\n\n    initialState = temp;\n    i++;\n  }\n\n  shuffleArray(initialState);\n  return initialState;\n};\n\n_c4 = GenerateInitialCards;\nexport function verifyRemove(cardToRemove) {\n  let numDifferent = 0;\n\n  for (const i = 0; i < cardToRemove[0].size; i++) {\n    let map = new Map();\n\n    for (const card of cardToRemove) {\n      map.set(card[i], 1);\n    }\n\n    if (map.size == 2) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction isSameCard(card1, card2) {\n  for (let i = 0; i < card1.size; i++) {\n    if (card1[i] != card2[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction shuffleArray(array) {\n  for (let i = array.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [array[i], array[j]] = [array[j], array[i]];\n  }\n}\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"ToCompleteReducer\");\n$RefreshReg$(_c2, \"CompletedReducer\");\n$RefreshReg$(_c3, \"CardToRemove\");\n$RefreshReg$(_c4, \"GenerateInitialCards\");","map":{"version":3,"sources":["/Users/xiangyizhou/Desktop/NEU/CS5610/project2/project2/src/Reducer.js"],"names":["combineReducers","useSelector","mainReducer","state","toComplete","completed","dimensions","stateRange","numView","cardToRemove","action","ToCompleteReducer","CompletedReducer","DIMENSIONS","STATERANGE","type","verifyRemove","newToComplete","card","isSameCard","push","GenerateInitialCards","CardToRemove","props","i","initialState","temp","j","forEach","item","index","shuffleArray","numDifferent","size","map","Map","set","card1","card2","array","length","Math","floor","random"],"mappings":"AAAA,SAASA,eAAT,QAAgC,OAAhC;AACA,SAAQC,WAAR,QAA2B,aAA3B,C,CAGA;AACA;AACA;AACA;;AAEA,eAAe,SAASC,WAAT,CACXC,KAAK,GAAC;AACNC,EAAAA,UAAU,EAAC,EADL;AAENC,EAAAA,SAAS,EAAC,EAFJ;AAGNC,EAAAA,UAAU,EAAC,CAHL;AAINC,EAAAA,UAAU,EAAC,CAJL;AAKNC,EAAAA,OAAO,EAAC,EALF;AAMNC,EAAAA,YAAY,EAAC;AANP,CADK,EASXC,MATW,EASH;AACR,SAAO;AACHN,IAAAA,UAAU,EAACO,iBAAiB,CAACR,KAAD,EAAQO,MAAR,CADzB;AAEFL,IAAAA,SAAS,EAACO,gBAAgB,CAACT,KAAD,EAAQO,MAAR,CAFxB;AAGFJ,IAAAA,UAAU,EAACH,KAAK,CAACG,UAHf;AAIFC,IAAAA,UAAU,EAACJ,KAAK,CAACI,UAJf;AAKFC,IAAAA,OAAO,EAACL,KAAK,CAACK,OALZ;AAMFC,IAAAA,YAAY,EAACN,KAAK,CAACM;AANjB,GAAP;AAQH;;AAED,SAASE,iBAAT,CAA2BR,KAA3B,EAAkCO,MAAlC,EAAyC;AACrC,MAAIN,UAAU,GAAGD,KAAK,CAACC,UAAvB;AACA,MAAIS,UAAU,GAACV,KAAK,CAACG,UAArB;AACA,MAAIQ,UAAU,GAACX,KAAK,CAACI,UAArB;;AACA,MAAGG,MAAM,CAACK,IAAP,KAAgB,YAAnB,EAAgC;AAC5B,QAAIC,YAAY,CAACN,MAAM,CAACD,YAAR,CAAhB,EAAsC;AAClC,UAAIQ,aAAa,GAAG,EAApB;;AACA,WAAI,MAAMC,IAAV,IAAkBd,UAAlB,EAA6B;AACzB,YAAIe,UAAU,CAACD,IAAD,EAAOR,MAAM,CAACD,YAAP,CAAoB,CAApB,CAAP,CAAV,IAA4CU,UAAU,CAACD,IAAD,EAAOR,MAAM,CAACD,YAAP,CAAoB,CAApB,CAAP,CAAtD,IAAwFU,UAAU,CAACD,IAAD,EAAOR,MAAM,CAACD,YAAP,CAAoB,CAApB,CAAP,CAAtG,EAAsI;AAClI;AACH;;AACDQ,QAAAA,aAAa,CAACG,IAAd,CAAmBF,IAAnB;AACH;;AACD,aAAOD,aAAP;AACH,KATD,MAUI;AACA,aAAOb,UAAP;AACH;AACJ,GAdD,MAeK,IAAIM,MAAM,CAACK,IAAP,KAAgB,YAApB,EAAiC;AAClC,WAAOM,oBAAoB,CAAC;AAACf,MAAAA,UAAU,EAACO,UAAZ;AAAwBN,MAAAA,UAAU,EAACO;AAAnC,KAAD,CAA3B;AACH,GAFI,MAGD;AACA,WAAOV,UAAP;AACH;AACJ;;KAzBQO,iB;;AA2BT,SAASC,gBAAT,CAA0BT,KAA1B,EAAiCO,MAAjC,EAAwC;AACpC,MAAIL,SAAS,GAAGF,KAAK,CAACE,SAAtB;;AACA,MAAGK,MAAM,CAACK,IAAP,KAAgB,YAAnB,EAAgC;AAC5B,QAAIC,YAAY,CAACN,MAAM,CAACD,YAAR,CAAhB,EAAsC;AAClC,aAAO,CAAC,GAAGJ,SAAJ,EAAe,GAAGK,MAAM,CAACD,YAAzB,CAAP;AACH,KAFD,MAGI;AACA,aAAOJ,SAAP;AACH;AACJ,GAPD,MAQK,IAAIK,MAAM,CAACK,IAAP,KAAgB,YAApB,EAAiC;AAClC,WAAO,EAAP;AACH,GAFI,MAGD;AACA,WAAOV,SAAP;AACH;AACJ;;MAhBQO,gB;;AAkBT,MAAMU,YAAY,GAAC,CAACnB,KAAD,EAAQO,MAAR,KAAmB;AAClC,MAAIA,MAAM,CAACK,IAAP,KAAgB,iBAApB,EAAsC,CAErC;AAEJ,CALD;;MAAMO,Y;;AAON,MAAMD,oBAAoB,GAAEE,KAAD,IAAW;AAClC;AACA;AACA,QAAMV,UAAU,GAAGU,KAAK,CAACjB,UAAzB;AACA,QAAMQ,UAAU,GAAGS,KAAK,CAAChB,UAAzB;AACA,MAAIiB,CAAC,GAAG,CAAR;AACA,MAAIC,YAAY,GAAG,CAAC,EAAD,CAAnB;;AACA,SAAOD,CAAC,GAAGX,UAAX,EAAuB;AACrB,QAAIa,IAAI,GAAG,EAAX;;AACA,SAAK,IAAIC,CAAC,GAAC,CAAX,EAAaA,CAAC,GAACb,UAAf,EAA0Ba,CAAC,EAA3B,EAA+B;AAC3BF,MAAAA,YAAY,CAACG,OAAb,CAAqB,CAACC,IAAD,EAAOC,KAAP,KAAgBJ,IAAI,CAACN,IAAL,CAAU,CAAC,GAAGS,IAAJ,EAAUF,CAAV,CAAV,CAArC;AACH;;AACDF,IAAAA,YAAY,GAAGC,IAAf;AACAF,IAAAA,CAAC;AACF;;AACDO,EAAAA,YAAY,CAACN,YAAD,CAAZ;AACA,SAAOA,YAAP;AACD,CAjBH;;MAAMJ,oB;AAmBN,OAAO,SAASL,YAAT,CAAsBP,YAAtB,EAAoC;AACvC,MAAIuB,YAAY,GAAG,CAAnB;;AACA,OAAK,MAAMR,CAAC,GAAC,CAAb,EAAeA,CAAC,GAACf,YAAY,CAAC,CAAD,CAAZ,CAAgBwB,IAAjC,EAAsCT,CAAC,EAAvC,EAA2C;AACvC,QAAIU,GAAG,GAAG,IAAIC,GAAJ,EAAV;;AACA,SAAI,MAAMjB,IAAV,IAAkBT,YAAlB,EAAgC;AAC5ByB,MAAAA,GAAG,CAACE,GAAJ,CAAQlB,IAAI,CAACM,CAAD,CAAZ,EAAiB,CAAjB;AACH;;AACD,QAAIU,GAAG,CAACD,IAAJ,IAAY,CAAhB,EAAmB;AACf,aAAO,KAAP;AACH;AACJ;;AACD,SAAO,IAAP;AACH;;AAED,SAASd,UAAT,CAAoBkB,KAApB,EAA2BC,KAA3B,EAAiC;AAC7B,OAAI,IAAId,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACa,KAAK,CAACJ,IAApB,EAAyBT,CAAC,EAA1B,EAA6B;AACzB,QAAIa,KAAK,CAACb,CAAD,CAAL,IAAYc,KAAK,CAACd,CAAD,CAArB,EAA0B;AACtB,aAAO,KAAP;AACH;AACJ;;AACD,SAAO,IAAP;AACH;;AAED,SAASO,YAAT,CAAsBQ,KAAtB,EAA6B;AACzB,OAAK,IAAIf,CAAC,GAAGe,KAAK,CAACC,MAAN,GAAe,CAA5B,EAA+BhB,CAAC,GAAG,CAAnC,EAAsCA,CAAC,EAAvC,EAA2C;AACvC,UAAMG,CAAC,GAAGc,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,MAAiBnB,CAAC,GAAG,CAArB,CAAX,CAAV;AACA,KAACe,KAAK,CAACf,CAAD,CAAN,EAAWe,KAAK,CAACZ,CAAD,CAAhB,IAAuB,CAACY,KAAK,CAACZ,CAAD,CAAN,EAAWY,KAAK,CAACf,CAAD,CAAhB,CAAvB;AACH;AACJ","sourcesContent":["import { combineReducers } from 'redux';\nimport {useSelector } from 'react-redux'\n\n\n// export default combineReducers({\n//     toComplete:ToCompleteReducer,\n//     completed:CompletedReducer,\n// })\n\nexport default function mainReducer(\n    state={\n    toComplete:[],\n    completed:[],\n    dimensions:4,\n    stateRange:3,\n    numView:12,\n    cardToRemove:[],\n    },\n    action) {\n    return {\n        toComplete:ToCompleteReducer(state, action),\n         completed:CompletedReducer(state, action),\n         dimensions:state.dimensions,\n         stateRange:state.stateRange,\n         numView:state.numView,\n         cardToRemove:state.cardToRemove,\n        }\n}\n\nfunction ToCompleteReducer(state, action){\n    let toComplete = state.toComplete\n    let DIMENSIONS=state.dimensions\n    let STATERANGE=state.stateRange\n    if(action.type === \"TRY_REMOVE\"){\n        if (verifyRemove(action.cardToRemove)){\n            let newToComplete = [];\n            for(const card of toComplete){\n                if (isSameCard(card, action.cardToRemove[0]) || isSameCard(card, action.cardToRemove[1]) || isSameCard(card, action.cardToRemove[2])) {\n                    continue;\n                }\n                newToComplete.push(card);\n            }\n            return newToComplete;\n        }\n        else{\n            return toComplete;\n        }\n    }\n    else if (action.type === \"START_GAME\"){\n        return GenerateInitialCards({dimensions:DIMENSIONS, stateRange:STATERANGE})\n    }\n    else{\n        return toComplete;\n    }\n}\n\nfunction CompletedReducer(state, action){\n    let completed = state.completed\n    if(action.type === \"TRY_REMOVE\"){\n        if (verifyRemove(action.cardToRemove)){\n            return [...completed, ...action.cardToRemove];\n        }\n        else{\n            return completed;\n        }\n    }\n    else if (action.type === \"START_GAME\"){\n        return [];\n    }\n    else{\n        return completed;\n    }\n}\n\nconst CardToRemove=(state, action) => {\n    if (action.type === \"AddCardToRemove\"){\n        \n    }\n\n}\n\nconst GenerateInitialCards=(props) => {\n    // let DIMENSIONS=useSelector(state=>state.dimensions);\n    // let STATERANGE=useSelector(state=>state.stateRange);\n    const DIMENSIONS = props.dimensions;\n    const STATERANGE = props.stateRange;\n    let i = 0;\n    let initialState = [[]];\n    while (i < DIMENSIONS) {\n      let temp = [];\n      for (let j=0;j<STATERANGE;j++) {\n          initialState.forEach((item, index)=> temp.push([...item, j]))\n      }\n      initialState = temp;\n      i++;\n    }\n    shuffleArray(initialState)\n    return initialState\n  }\n\nexport function verifyRemove(cardToRemove) {\n    let numDifferent = 0;\n    for (const i=0;i<cardToRemove[0].size;i++) {\n        let map = new Map();\n        for(const card of cardToRemove) {\n            map.set(card[i], 1);\n        }\n        if (map.size == 2) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction isSameCard(card1, card2){\n    for(let i=0;i<card1.size;i++){\n        if (card1[i] != card2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction shuffleArray(array) {\n    for (let i = array.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [array[i], array[j]] = [array[j], array[i]];\n    }\n}"]},"metadata":{},"sourceType":"module"}