{"ast":null,"code":"import { combineReducers } from 'redux';\nimport { useSelector } from 'react-redux'; // export default combineReducers({\n//     toComplete:ToCompleteReducer,\n//     completed:CompletedReducer,\n// })\n\nexport default function mainReducer(state = {\n  toComplete: [],\n  completed: [],\n  dimensions: 4,\n  stateRange: 3,\n  numView: 12,\n  cardToRemove: []\n}, action) {\n  let cardToRemove = CardToRemoveReducer(state, action);\n  let toComplete = state.toComplete;\n  let completed = state.completed;\n  let DIMENSIONS = state.dimensions;\n  let STATERANGE = state.stateRange;\n  console.log(cardToRemove);\n\n  if (cardToRemove !== undefined && cardToRemove.length === 3) {\n    if (verifyRemove(cardToRemove)) {\n      console.log(\"success remove\"); // let newToComplete = [];\n      // for(const card of toComplete){\n      //     if (isInToRemove(card, cardToRemove)) {\n      //         continue;\n      //     }\n      //     newToComplete.push(card);\n      // }\n\n      toComplete = toComplete.filter((value, index, array) => isInToRemove(value, cardToRemove));\n      completed = [...completed, ...cardToRemove];\n      cardToRemove = [];\n    } else {\n      console.log(\"not valid remove\");\n      cardToRemove = [];\n    }\n  } else if (action.type === \"START_GAME\") {\n    toComplete = GenerateInitialCards({\n      dimensions: DIMENSIONS,\n      stateRange: STATERANGE\n    });\n    completed = [];\n    cardToRemove = [];\n  }\n\n  return {\n    toComplete: toComplete,\n    completed: completed,\n    dimensions: state.dimensions,\n    stateRange: state.stateRange,\n    numView: state.numView,\n    cardToRemove: cardToRemove\n  };\n}\n\nconst CardToRemoveReducer = (state, action) => {\n  const cardToRemove = state.cardToRemove;\n\n  if (action.type === \"AddCardToRemove\") {\n    for (let card of cardToRemove) {\n      if (isSameCard(card, action.card)) {\n        // console.log(card)\n        // console.log(action.card)\n        return cardToRemove;\n      }\n    }\n\n    let newCardToRemove = [...cardToRemove, action.card];\n    return newCardToRemove;\n  } else {\n    console.log(\"not add new\");\n    return cardToRemove;\n  }\n};\n\n_c = CardToRemoveReducer;\n\nconst GenerateInitialCards = props => {\n  // let DIMENSIONS=useSelector(state=>state.dimensions);\n  // let STATERANGE=useSelector(state=>state.stateRange);\n  const DIMENSIONS = props.dimensions;\n  const STATERANGE = props.stateRange;\n  let i = 0;\n  let initialState = [[]];\n\n  while (i < DIMENSIONS) {\n    let temp = [];\n\n    for (let j = 0; j < STATERANGE; j++) {\n      initialState.forEach((item, index) => temp.push([...item, j]));\n    }\n\n    initialState = temp;\n    i++;\n  }\n\n  shuffleArray(initialState);\n  return initialState;\n};\n\n_c2 = GenerateInitialCards;\nexport function verifyRemove(cardToRemove) {\n  console.log(\"check card to remove\");\n  console.log(cardToRemove);\n\n  for (let i = 0; i < cardToRemove[0].length; i++) {\n    let map = new Map();\n\n    for (const card of cardToRemove) {\n      map.set(card[i], 1);\n    }\n\n    console.log(map);\n\n    if (map.size === 2) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction isSameCard(card1, card2) {\n  // let card1 = props.card1\n  // let card2 = props.card2\n  // console.log(props)\n  // console.log(props.card1.length)\n  // console.log(props.card1)\n  for (let i = 0; i < card1.length; i++) {\n    if (card1[i] !== card2[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function isInToRemove(card, cardToRemove) {\n  for (let removeCard of cardToRemove) {\n    if (isSameCard(card, removeCard)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction shuffleArray(array) {\n  for (let i = array.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [array[i], array[j]] = [array[j], array[i]];\n  }\n}\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"CardToRemoveReducer\");\n$RefreshReg$(_c2, \"GenerateInitialCards\");","map":{"version":3,"sources":["/Users/xiangyizhou/Desktop/NEU/CS5610/project2/project2/src/Reducer.js"],"names":["combineReducers","useSelector","mainReducer","state","toComplete","completed","dimensions","stateRange","numView","cardToRemove","action","CardToRemoveReducer","DIMENSIONS","STATERANGE","console","log","undefined","length","verifyRemove","filter","value","index","array","isInToRemove","type","GenerateInitialCards","card","isSameCard","newCardToRemove","props","i","initialState","temp","j","forEach","item","push","shuffleArray","map","Map","set","size","card1","card2","removeCard","Math","floor","random"],"mappings":"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","sourcesContent":["import { combineReducers } from 'redux';\nimport {useSelector } from 'react-redux'\n\n\n// export default combineReducers({\n//     toComplete:ToCompleteReducer,\n//     completed:CompletedReducer,\n// })\n\nexport default function mainReducer(\n    state={\n    toComplete:[],\n    completed:[],\n    dimensions:4,\n    stateRange:3,\n    numView:12,\n    cardToRemove:[],\n    },\n    action) {\n        let cardToRemove = CardToRemoveReducer(state, action);\n        let toComplete = state.toComplete\n        let completed = state.completed\n        let DIMENSIONS=state.dimensions\n        let STATERANGE=state.stateRange\n        console.log(cardToRemove)\n\n        if(cardToRemove !== undefined && cardToRemove.length === 3){\n            if (verifyRemove(cardToRemove)){\n                console.log(\"success remove\")\n                // let newToComplete = [];\n                // for(const card of toComplete){\n                //     if (isInToRemove(card, cardToRemove)) {\n                //         continue;\n                //     }\n                //     newToComplete.push(card);\n                // }\n                toComplete = toComplete.filter((value,index,array)=>isInToRemove(value, cardToRemove));\n                completed = [...completed, ...cardToRemove]\n                cardToRemove = [];\n            }\n            else{\n                console.log(\"not valid remove\")\n                cardToRemove = [];\n            }\n        }\n        else if (action.type === \"START_GAME\"){\n            toComplete = GenerateInitialCards({dimensions:DIMENSIONS, stateRange:STATERANGE})\n            completed = [];\n            cardToRemove = [];\n        }\n    return {\n        toComplete:toComplete,\n         completed:completed,\n         dimensions:state.dimensions,\n         stateRange:state.stateRange,\n         numView:state.numView,\n         cardToRemove:cardToRemove,\n        }\n}\n\nconst CardToRemoveReducer=(state, action) => {\n    const cardToRemove = state.cardToRemove;\n    if (action.type === \"AddCardToRemove\"){\n        for(let card of cardToRemove){\n            if(isSameCard(card, action.card)){\n                // console.log(card)\n                // console.log(action.card)\n                return cardToRemove\n            }\n        }\n        let newCardToRemove = [...cardToRemove, action.card]\n        return newCardToRemove\n    }\n    else{\n        console.log(\"not add new\")\n        return cardToRemove;\n    }\n\n}\n\nconst GenerateInitialCards=(props) => {\n    // let DIMENSIONS=useSelector(state=>state.dimensions);\n    // let STATERANGE=useSelector(state=>state.stateRange);\n    const DIMENSIONS = props.dimensions;\n    const STATERANGE = props.stateRange;\n    let i = 0;\n    let initialState = [[]];\n    while (i < DIMENSIONS) {\n      let temp = [];\n      for (let j=0;j<STATERANGE;j++) {\n          initialState.forEach((item, index)=> temp.push([...item, j]))\n      }\n      initialState = temp;\n      i++;\n    }\n    shuffleArray(initialState)\n    return initialState\n  }\n\nexport function verifyRemove(cardToRemove) {\n    console.log(\"check card to remove\")\n    console.log(cardToRemove)\n    for (let i=0;i<cardToRemove[0].length;i++) {\n        let map = new Map();\n        for(const card of cardToRemove) {\n            map.set(card[i], 1);\n        }\n        console.log(map)\n        if (map.size === 2) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction isSameCard(card1, card2){\n    // let card1 = props.card1\n    // let card2 = props.card2\n    // console.log(props)\n    // console.log(props.card1.length)\n    // console.log(props.card1)\n    for(let i=0;i<card1.length;i++){\n        if (card1[i] !== card2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n\nexport function isInToRemove(card, cardToRemove){\n    for (let removeCard of cardToRemove){\n        if(isSameCard(card,removeCard)){\n            return true\n        }\n    }\n    return false\n}\n\nfunction shuffleArray(array) {\n    for (let i = array.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [array[i], array[j]] = [array[j], array[i]];\n    }\n}"]},"metadata":{},"sourceType":"module"}